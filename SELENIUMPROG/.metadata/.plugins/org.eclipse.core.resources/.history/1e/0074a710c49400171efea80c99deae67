package pac1;

import java.io.File;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Calendar;

import org.apache.commons.io.FileUtils;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;
import org.testng.Reporter;

public class Reportvr {

	public static void captureScreenshot(WebDriver driver) throws Throwable 
 {
	
		/*TakesScreenshot ts=(TakesScreenshot)driver;
	       File src=ts.getScreenshotAs(OutputType.FILE);
	    String dest="D:\\LKSAHU\\REPORTS\\RepRes\\ScrShot"+name+".png";
		 File destination= new File(dest);
		 FileUtils.copyFile(src, destination);
		System.out.println("ScreenShot is taken");*/
        
		String timeStamp;
		File screenShotName;
		File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
		//The below method will save the screen shot in d drive with name "screenshot.png"
		timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(Calendar.getInstance().getTime()); 
		screenShotName = new File("D:\\MyTest\\Screenshots\\"+timeStamp+".png");
		 System.out.println("screenShotName");
		 
		FileUtils.copyFile(scrFile, screenShotName);
		 System.out.println("screen shot taken");
		String filePath = screenShotName.toString();
		 System.out.println("filePath");
		String path = "<img src=\"file://" + filePath + "\" alt=\"\"/>";;
		Reporter.log(path);
		
	
		}
}
